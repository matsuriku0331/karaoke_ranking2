<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}根性カラオキランキング{% endblock %}</title>
  <style>
    :root{
      --bg:#0f172a;         /* slate-900 */
      --card:#111827;       /* gray-900 */
      --muted:#94a3b8;      /* slate-400 */
      --text:#e5e7eb;       /* gray-200 */
      --accent:#22c55e;     /* green-500 */
      --accent-2:#06b6d4;   /* cyan-500 */
      --border:#1f2937;     /* gray-800 */
      --chip:#0ea5e9;       /* sky-500 */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;background:linear-gradient(180deg,#0b1023, #0f172a 40%, #0b1023);
      color:var(--text); font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
      -webkit-font-smoothing:antialiased; line-height:1.6;
      /* ★ ヘッダー固定のため上余白 */
      padding-top:64px;
    }
    .container{max-width:1000px;margin:0 auto;padding:24px}
    /* ★ 常時表示の固定ヘッダー */
    header{
      position:fixed; top:0; left:0; right:0; z-index:100;
      backdrop-filter: blur(8px);
      background:rgba(15,23,42,.8); border-bottom:1px solid var(--border);
    }
    .nav{
      display:flex; align-items:center; justify-content:space-between;
      gap:16px; padding:12px 24px;
    }
    .brand{display:flex; align-items:center; gap:10px; font-weight:700}
    .brand .logo{
      width:28px;height:28px;border-radius:8px;
      background:conic-gradient(from 210deg, var(--accent), var(--accent-2));
      box-shadow:0 0 20px rgba(34,197,94,.35);
      flex-shrink:0;
    }
    a,button{cursor:pointer}
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      background:var(--accent); color:#0b1023; border:none; padding:9px 14px;
      border-radius:10px; font-weight:700; transition:transform .05s ease, box-shadow .2s;
      box-shadow:0 8px 24px rgba(34,197,94,.2), inset 0 -1px 0 rgba(0,0,0,.2);
      white-space:nowrap;
    }
    .btn:hover{transform:translateY(-1px); box-shadow:0 12px 28px rgba(34,197,94,.25)}
    .btn.secondary{
      background:#1f2937; color:var(--text); box-shadow:none; border:1px solid var(--border);
    }
    .card{
      background:rgba(17,24,39,.66); border:1px solid var(--border);
      border-radius:16px; padding:18px;
      box-shadow:inset 0 1px 0 rgba(255,255,255,.03), 0 10px 30px rgba(2,6,23,.4);
      overflow:hidden;
    }
    .h1{font-size:clamp(20px,2.4vw,28px); font-weight:800; letter-spacing:.3px; margin:18px 0}
    .muted{color:var(--muted)}

    /* フォーム */
    .grid{display:grid; gap:12px}
    .grid.cols-3{grid-template-columns:1fr 1fr auto}
    .row{display:flex; gap:10px; flex-wrap:wrap}
    label{font-size:12px; color:var(--muted)}
    input[type="text"], select{
      width:100%; padding:10px 12px; color:var(--text); background:#0b1223;
      border:1px solid var(--border); border-radius:10px; outline:none;
      min-height:42px;
    }
    input::placeholder{color:#708090}

    /* ソングカード */
    .song{margin-bottom:16px}
    .song-head{
      display:flex; gap:10px; align-items:center; justify-content:space-between; margin-bottom:8px;
      flex-wrap:wrap;
    }
    .song-title{font-weight:800; font-size:18px}
    .artist{font-size:13px; color:var(--muted)}
    .chip{
      padding:4px 8px; background:rgba(14,165,233,.15);
      border:1px solid rgba(14,165,233,.35); color:#7dd3fc; border-radius:999px; font-size:12px
    }

    table{width:100%; border-collapse:separate; border-spacing:0 8px; table-layout:fixed}
    th,td{text-align:left; padding:10px 12px; vertical-align:middle; word-break:break-word; overflow-wrap:break-word}
    thead th{font-size:12px; color:var(--muted); font-weight:700}
    tbody tr{
      background:rgba(2,6,23,.55); border:1px solid var(--border);
    }
    tbody td:first-child{border-radius:10px 0 0 10px}
    tbody td:last-child{border-radius:0 10px 10px 0}
    .rank{
      font-weight:900; letter-spacing:.5px; width:52px; text-align:center;
    }
    .medal-1{color:#fde68a} /* 金 */
    .medal-2{color:#e5e7eb} /* 銀 */
    .medal-3{color:#fca5a5} /* 銅 */

    footer{opacity:.7; font-size:12px; text-align:center; padding:30px 0}

    /* ---- スコアの共通装飾 ---- */
    .score{
      display:inline-block;
      font-weight:900;
      font-variant-numeric: tabular-nums;
      letter-spacing:.2px;
      padding:4px 8px;
      border-radius:10px;
      background:rgba(34,197,94,.10);
      border:1px solid rgba(34,197,94,.35);
      text-shadow:0 0 14px rgba(34,197,94,.22);
    }

    /* ------- モバイル最適化（追加） ------- */
    @media (max-width: 768px) {
      body{ padding-top:60px; }
      .nav{ padding:10px 14px; gap:10px; }
      .container{ padding:16px; }
      .h1{ font-size:18px; margin:12px 0; }
      .brand{ gap:8px; }
      .brand div:last-child{ font-size:14px; }
      .btn{ padding:8px 12px; font-size:14px; border-radius:10px; }
      input[type="text"], select { min-height:40px; padding:10px 12px; font-size:15px; }
      table{ border-spacing:0 6px; }
      th, td { padding:8px 10px; font-size:14px; }
      .song-title{ font-size:16px; }
      .artist{ font-size:12px; }
    }
    @media (max-width: 480px) {
      .nav{ padding:8px 10px; }
      .brand .logo{ width:24px; height:24px; }
      .brand div:last-child{ font-size:13px; }
      .btn{ padding:7px 10px; font-size:13px; }
      input[type="text"], select { min-height:38px; font-size:14px; padding:10px 12px; }
      th, td { padding:7px 8px; font-size:13px; }
      .h1{ font-size:17px; }
      .score{ padding:3px 6px; }
    }
  </style>
  {% block head %}{% endblock %}
</head>
<body>
  <header>
    <div class="nav">
      <div class="brand">
        <div class="logo"></div>
        <div>根性カラオキランキング</div>
      </div>

      <div class="row" style="gap:8px; align-items:center">
        <!-- ランキング更新 -->
        <form id="updateForm" method="post" action="{{ url_for('update_ranking') }}">
          {% block update_hidden %}{% endblock %}
          <button class="btn" type="submit">ランキング更新</button>
        </form>
        <!-- ★ ページ固有のヘッダー右側アクション -->
        {% block header_extra %}{% endblock %}
      </div>
    </div>
  </header>

  <main class="container">
    {% block content %}{% endblock %}
  </main>

  <footer>© {{ 2025 }} Karaoke Ranking</footer>
  {% block scripts %}{% endblock %}
</body>
</html>